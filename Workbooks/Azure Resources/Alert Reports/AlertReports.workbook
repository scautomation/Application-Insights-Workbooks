{
    "version": "Notebook/1.0",
    "items": [
      {
        "type": 9,
        "content": {
          "version": "KqlParameterItem/1.0",
          "parameters": [
            {
              "id": "92e646b9-04fe-49b8-ae9c-cee454328024",
              "version": "KqlParameterItem/1.0",
              "name": "Subscription",
              "type": 6,
              "isRequired": true,
              "multiSelect": true,
              "quote": "'",
              "delimiter": ",",
              "typeSettings": {
                "additionalResourceOptions": [
                  "value::1",
                  "value::all"
                ],
                "includeAll": true
              },
              "timeContext": {
                "durationMs": 86400000
              },
              "defaultValue": "value::all",
              "value": [
                "value::1"
              ]
            },
            {
              "id": "88f789f4-125d-49f4-9edf-afe3f70e7d78",
              "version": "KqlParameterItem/1.0",
              "name": "TimeRange",
              "type": 4,
              "isRequired": true,
              "value": {
                "durationMs": 2592000000
              },
              "typeSettings": {
                "selectableValues": [
                  {
                    "durationMs": 300000
                  },
                  {
                    "durationMs": 900000
                  },
                  {
                    "durationMs": 1800000
                  },
                  {
                    "durationMs": 3600000
                  },
                  {
                    "durationMs": 14400000
                  },
                  {
                    "durationMs": 43200000
                  },
                  {
                    "durationMs": 86400000
                  },
                  {
                    "durationMs": 172800000
                  },
                  {
                    "durationMs": 259200000
                  },
                  {
                    "durationMs": 604800000
                  },
                  {
                    "durationMs": 1209600000
                  },
                  {
                    "durationMs": 2419200000
                  },
                  {
                    "durationMs": 2592000000
                  }
                ],
                "allowCustom": false
              },
              "timeContext": {
                "durationMs": 86400000
              }
            },
            {
              "id": "ee5e9c26-6ff6-4b8a-861d-0cd4d4665c35",
              "version": "KqlParameterItem/1.0",
              "name": "AlertTarget",
              "type": 7,
              "isRequired": true,
              "multiSelect": true,
              "quote": "'",
              "delimiter": ",",
              "query": "alertsmanagementresources\r\n| extend AlertTarget = tostring(properties.essentials.targetResourceType), MonitorService = tostring(properties.essentials.monitorService)\r\n| extend AlertTarget = case(\r\n        MonitorService == 'ActivityLog Administrative', 'ActivityLog',\r\n        AlertTarget == 'microsoft.insights/components', 'App Insights',\r\n        AlertTarget == 'microsoft.operationalinsights/workspaces', 'Log Analytics', \r\n        AlertTarget)\r\n| distinct AlertTarget",
              "crossComponentResources": [
                "{Subscription}"
              ],
              "typeSettings": {
                "additionalResourceOptions": [
                  "value::1",
                  "value::all"
                ],
                "showDefault": false
              },
              "defaultValue": "value::all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources"
            },
            {
              "id": "ae5dc3ff-60fb-46bf-acb5-b991faa0b6af",
              "version": "KqlParameterItem/1.0",
              "name": "Help",
              "label": "Show Help",
              "type": 10,
              "isRequired": true,
              "typeSettings": {
                "additionalResourceOptions": []
              },
              "jsonData": "[\r\n { \"value\": \"Yes\", \"label\": \"Yes\"},\r\n { \"value\": \"No\", \"label\": \"No\", \"selected\":true },\r\n { \"value\": \"Change Log\", \"label\": \"Change Log\"}\r\n]",
              "timeContext": {
                "durationMs": 86400000
              }
            },
            {
              "id": "06128bf1-a264-4f64-8e50-dece01014d16",
              "version": "KqlParameterItem/1.0",
              "name": "TagName",
              "type": 2,
              "query": "resources \r\n| where isnotempty(tags)\r\n| where tags !has \"hidden-\"\r\n| mv-expand tags\r\n| extend tagName = tostring(bag_keys(tags)[0])\r\n| distinct tagName",
              "crossComponentResources": [
                "{Subscription}"
              ],
              "isHiddenWhenLocked": true,
              "typeSettings": {
                "additionalResourceOptions": [],
                "showDefault": false
              },
              "timeContext": {
                "durationMs": 86400000
              },
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "value": null
            },
            {
              "id": "1e29e659-0425-4fd0-90a8-601b91d60be0",
              "version": "KqlParameterItem/1.0",
              "name": "AffectedResource",
              "type": 2,
              "multiSelect": true,
              "quote": "'",
              "delimiter": ",",
              "query": "alertsmanagementresources\r\n| extend FireTime = todatetime(properties.essentials.startDateTime), \r\n         LastModifiedTime = todatetime(properties.essentials.lastModifiedDateTime),\r\n         Severity = tostring(properties.essentials.severity), \r\n         MonitorCondition = tostring(properties.essentials.monitorCondition), \r\n         AlertTarget = tostring(properties.essentials.targetResourceType), \r\n         MonitorService = tostring(properties.essentials.monitorService),\r\n         ResolvedTime = todatetime(properties.essentials.monitorConditionResolvedDateTime)\r\n| extend AlertTarget = case(\r\n                MonitorService == 'ActivityLog Administrative', 'ActivityLog',\r\n                AlertTarget == 'microsoft.insights/components', 'App Insights',\r\n                AlertTarget == 'microsoft.operationalinsights/workspaces', 'Log Analytics', \r\n                AlertTarget)   \r\n| mv-expand Condition = properties\r\n| extend ResourceName = iff(AlertTarget == \"ActivityLog\", properties.context.context.activityLog.subscriptionId, tostring(properties.essentials.targetResourceName))\r\n| distinct ResourceName",
              "crossComponentResources": [
                "{Subscription}"
              ],
              "typeSettings": {
                "additionalResourceOptions": [
                  "value::1",
                  "value::3",
                  "value::5",
                  "value::all"
                ]
              },
              "defaultValue": "value::all",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "value": [
                "value::all"
              ]
            }
          ],
          "style": "pills",
          "queryType": 0,
          "resourceType": "microsoft.resourcegraph/resources"
        },
        "name": "parameters - 2"
      },
      {
        "type": 11,
        "content": {
          "version": "LinkItem/1.0",
          "style": "tabs",
          "links": [
            {
              "id": "9f3aed5d-01d5-48cb-8a54-ad84fa223a24",
              "cellValue": "tab",
              "linkTarget": "parameter",
              "linkLabel": "Active Alerts",
              "subTarget": "active",
              "style": "link"
            },
            {
              "id": "b013256b-5d9d-4eef-a52e-d3a37a54a8a6",
              "cellValue": "tab",
              "linkTarget": "parameter",
              "linkLabel": "Alert Statistics",
              "subTarget": "stats",
              "style": "link"
            },
            {
              "id": "acf71c82-4135-40c1-8850-0ebf9a58c29e",
              "cellValue": "tab",
              "linkTarget": "parameter",
              "linkLabel": "Alert Inventory",
              "subTarget": "inventory",
              "style": "link"
            }
          ]
        },
        "name": "links - 3"
      }
    ],
    "fallbackResourceIds": [
      "Azure Monitor"
    ],
    "fromTemplateId": "community-Workbooks/byork/AlertsManagement",
    "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
  }